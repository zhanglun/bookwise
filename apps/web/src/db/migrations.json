[{"sql":["DO $$ BEGIN\n CREATE TYPE \"public\".\"format\" AS ENUM('EPUB', 'PDF', 'MOBI', 'TEXT', 'UNKNOWN');\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n","\nCREATE TABLE IF NOT EXISTS \"authors\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"name\" varchar DEFAULT '',\n\t\"created_at\" timestamp with time zone DEFAULT now(),\n\t\"updated_at\" timestamp with time zone\n);\n","\nCREATE TABLE IF NOT EXISTS \"book_authors\" (\n\t\"book_id\" integer,\n\t\"author_id\" integer\n);\n","\nCREATE TABLE IF NOT EXISTS \"book_publishers\" (\n\t\"book_id\" integer,\n\t\"publisher_id\" integer\n);\n","\nCREATE TABLE IF NOT EXISTS \"books\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"title\" varchar(256) DEFAULT '',\n\t\"identifier\" varchar(256) DEFAULT '',\n\t\"subject\" varchar(256) DEFAULT '',\n\t\"description\" text DEFAULT '',\n\t\"contributor\" varchar(256) DEFAULT '',\n\t\"source\" varchar(256),\n\t\"format\" \"format\",\n\t\"page_count\" integer,\n\t\"isbn\" varchar(20),\n\t\"publish_at\" timestamp with time zone,\n\t\"created_at\" timestamp with time zone DEFAULT now(),\n\t\"updated_at\" timestamp with time zone,\n\t\"language_id\" integer,\n\tCONSTRAINT \"books_title_unique\" UNIQUE(\"title\")\n);\n","\nCREATE TABLE IF NOT EXISTS \"languages\" (\n\t\"id\" integer PRIMARY KEY NOT NULL,\n\t\"name\" varchar(50),\n\t\"code\" varchar(10)\n);\n","\nCREATE TABLE IF NOT EXISTS \"publishers\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"name\" varchar DEFAULT '',\n\t\"address\" varchar(255),\n\t\"created_at\" timestamp with time zone DEFAULT now(),\n\t\"updated_at\" timestamp with time zone\n);\n","\nDO $$ BEGIN\n ALTER TABLE \"book_authors\" ADD CONSTRAINT \"book_authors_book_id_books_id_fk\" FOREIGN KEY (\"book_id\") REFERENCES \"public\".\"books\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n","\nDO $$ BEGIN\n ALTER TABLE \"book_authors\" ADD CONSTRAINT \"book_authors_author_id_authors_id_fk\" FOREIGN KEY (\"author_id\") REFERENCES \"public\".\"authors\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n","\nDO $$ BEGIN\n ALTER TABLE \"book_publishers\" ADD CONSTRAINT \"book_publishers_book_id_books_id_fk\" FOREIGN KEY (\"book_id\") REFERENCES \"public\".\"books\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n","\nDO $$ BEGIN\n ALTER TABLE \"book_publishers\" ADD CONSTRAINT \"book_publishers_publisher_id_publishers_id_fk\" FOREIGN KEY (\"publisher_id\") REFERENCES \"public\".\"publishers\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n","\nDO $$ BEGIN\n ALTER TABLE \"books\" ADD CONSTRAINT \"books_language_id_languages_id_fk\" FOREIGN KEY (\"language_id\") REFERENCES \"public\".\"languages\"(\"id\") ON DELETE no action ON UPDATE no action;\nEXCEPTION\n WHEN duplicate_object THEN null;\nEND $$;\n"],"bps":true,"folderMillis":1727602128471,"hash":"57867bc9a03994c37d0ca4846cc06a6e4be0a2f2337a1c4385f730a2eca27291"},{"sql":["ALTER TABLE \"books\" ALTER COLUMN \"source\" SET DEFAULT '';","\nALTER TABLE \"books\" ADD COLUMN \"path\" varchar(256);"],"bps":true,"folderMillis":1727602951238,"hash":"6a5e9f9bc2c19488ad1d1a9de5665ce2dae57fd3561a1270f8145cc833251bc6"}]